<ng-template #loading>
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</ng-template>

<mat-card>
  <mat-card-content>
    <core-input-search-go fxFlex="auto" [entityName]="entityName"></core-input-search-go>    
  </mat-card-content>
</mat-card>

<form *ngIf="(loadParams$ | async); else loading" 
      [formGroup]="control" 
      (ngSubmit)="onSubmit()" 
      novalidate autocomplete="off">

  <ng-container *ngIf="(loadDisplay$ | async); else loading">
    <ng-container *ngIf="(loadStorage$ | async); else loading">
      <core-abstract-control-form-group [config]="config"
                                        [control]="control"
      >
      </core-abstract-control-form-group>
    
      <!-- <p>Debug Form value: {{ form.value | json }}</p>
      <p>Debug Form status: {{ form.status | json }}</p> -->
    </ng-container> 
  </ng-container>

  <mat-card>
    <mat-card-content>
      <core-event-button [config]="{text:'Aceptar',action:'submit',color:'primary',fieldEvent:optField}"></core-event-button>    
    </mat-card-content>
  </mat-card>
  
  
</form>


