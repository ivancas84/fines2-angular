<ng-template #loading>
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</ng-template>
 
<ng-container *ngIf="(loadParams$ | async); else loading">
    <ng-container *ngIf="(loadDisplay$ | async); else loading">
        <ng-container *ngIf="(loadStorage$ | async); else loading">
            <mat-card>
                    <mat-card-header>
                        <mat-card-title>
                            Buscar alumno     
                        </mat-card-title>
                  
                    </mat-card-header>
                    <mat-card-content>
                        <core-input-search-go fxFlex="auto" 
                            [entity_name]="'persona'" 
                            [field_name]="'persona'"></core-input-search-go>        
                    </mat-card-content>
                </mat-card>
            <app-alumno-admin-fieldset-persona
                [control]="controlPersona"
                (onSubmit)="submitPersona()"></app-alumno-admin-fieldset-persona>


            <app-alumno-admin-fieldset-alumno
                [control]="controlAlumno"
                (onSubmit)="submitAlumno()"></app-alumno-admin-fieldset-alumno>

            <app-alumno-admin-table-alumno-comision
                [control]="controlAlumnoComision_"
                (onSubmit)="submitAlumnoComision()"
                (add)="addAlumnoComision()"></app-alumno-admin-table-alumno-comision>

            <app-alumno-admin-table-detalle-persona 
                [control]="controlDetallePersona_"
                (onSubmit)="submitDetallePersona()"
                (add)="addDetallePersona()"></app-alumno-admin-table-detalle-persona>

            <mat-card>
                <mat-card-header>
                  <mat-card-title>Calificaciones
                      <button  
                          type="button" 
                          mat-raised-button 
                          title="Generar calificaciones"
                          (click)="generarCalificaciones()">Generar Calificaciones</button>
                  </mat-card-title>
                  <p>Mostrando {{totalCalificaciones}} de {{totalAsignaturas}}  calificaciones (aprobadas {{totalCalificacionesAprobadas}})</p>
                </mat-card-header>
                <mat-card-content>
                  
                  <app-alumno-admin-table-calificacion
                      [control]="controlCalificacion_"
                      (onSubmit)="submitCalificacion()"
                      (add)="addCalificacion()"
                      [options]="options"></app-alumno-admin-table-calificacion>
                  </mat-card-content>
              </mat-card>
        </ng-container>
    </ng-container>
</ng-container>
