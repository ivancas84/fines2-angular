<ng-template #loading>
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</ng-template>

<mat-card>
  <mat-card-header>
    <mat-card-title>
      Buscar Comisi贸n   
      <core-event-icon [config]="{icon:'cached', action:'reset', color:'primary',fieldEvent:optField}"></core-event-icon>    
      <core-event-icon [config]="{icon:'clear', action:'clear', color:'primary',fieldEvent:optField}"></core-event-icon>    
    </mat-card-title>
 
  </mat-card-header>
  <mat-card-content>
    <core-input-search-go fxFlex="auto" [entityName]="'comision'"></core-input-search-go>    
  </mat-card-content>
</mat-card>

<ng-container *ngIf="(loadParams$ | async); else loading">

  <ng-container *ngIf="(loadDisplay$ | async); else loading">
    <ng-container *ngIf="(loadStorage$ | async); else loading">
      <mat-card>
        <mat-card-header>
          <mat-card-title>
            Datos principales
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <core-abstract-control-form-group [config]="configComision"
                                            [control]="controlComision"></core-abstract-control-form-group>
          <mat-error *ngIf="controlComision.errors?.['notUnique'] && (controlComision.touched || controlComision.dirty)">
            La combinaci贸n sede-division-planificacion ya se encuentra utilizada <a routerLink="/comision-admin" [queryParams]="{ id: controlComision.errors?.['notUnique'] }">Ver comisi贸n</a>
          </mat-error>
        </mat-card-content>
      </mat-card>

      <mat-card>
        <mat-card-content>
          <core-event-button [config]="{disabled:(control.status == 'PENDING'), text: 'Guardar Comisi贸n', action:'submit_comision', fieldEvent:optField}"></core-event-button>
        </mat-card-content>
      </mat-card>
    </ng-container> 
  </ng-container>

 
  
</ng-container>


